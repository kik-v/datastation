<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="763px" preserveAspectRatio="none" style="width:801px;height:763px;" version="1.1" viewBox="0 0 801 763" width="801px" zoomAndPan="magnify"><defs><filter height="300%" id="f1j1iz55hb2pf0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F0FFFF" height="751.7188" style="stroke:#A80036;stroke-width:1.0;" width="617" x="164" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99" x="423" y="18.0669">Data Station</text><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="58.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="196.5" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="504.8594" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332.5" y="148.5625"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="102.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="337.5" y="399.4922"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="122.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="337.5" y="531.0234"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="155.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="480.5" y="206.8281"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="480.5" y="623.4219"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="729.5" y="457.7578"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="489" x="298" y="419.4922"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="39" x2="39" y1="88.2969" y2="671.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="201" x2="201" y1="88.2969" y2="671.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="337" x2="337" y1="88.2969" y2="671.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="485" x2="485" y1="88.2969" y2="671.4219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="734" x2="734" y1="88.2969" y2="671.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="5" y="84.9951">Afnemer</text><ellipse cx="39.5" cy="15" fill="#FEFECE" filter="url(#f1j1iz55hb2pf0)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M39.5,23 L39.5,50 M26.5,31 L52.5,31 M39.5,50 L26.5,65 M39.5,50 L52.5,65 " fill="none" filter="url(#f1j1iz55hb2pf0)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="5" y="683.417">Afnemer</text><ellipse cx="39.5" cy="696.7188" fill="#FEFECE" filter="url(#f1j1iz55hb2pf0)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M39.5,704.7188 L39.5,731.7188 M26.5,712.7188 L52.5,712.7188 M39.5,731.7188 L26.5,746.7188 M39.5,731.7188 L52.5,746.7188 " fill="none" filter="url(#f1j1iz55hb2pf0)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="168" y="84.9951">Protocol</text><path d="M181,44 L181,68 M181,56 L198,56 " fill="none" filter="url(#f1j1iz55hb2pf0)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="210" cy="56" fill="#FEFECE" filter="url(#f1j1iz55hb2pf0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="168" y="683.417">Protocol</text><path d="M181,690.7188 L181,714.7188 M181,702.7188 L198,702.7188 " fill="none" filter="url(#f1j1iz55hb2pf0)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="210" cy="702.7188" fill="#FEFECE" filter="url(#f1j1iz55hb2pf0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="308" y="84.9951">Service</text><ellipse cx="337.5" cy="56" fill="#FEFECE" filter="url(#f1j1iz55hb2pf0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="333.5,44,339.5,39,337.5,44,339.5,49,333.5,44" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="308" y="683.417">Service</text><ellipse cx="337.5" cy="702.7188" fill="#FEFECE" filter="url(#f1j1iz55hb2pf0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="333.5,690.7188,339.5,685.7188,337.5,690.7188,339.5,695.7188,333.5,690.7188" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="451" y="84.9951">Platform</text><ellipse cx="485.5" cy="56" fill="#FEFECE" filter="url(#f1j1iz55hb2pf0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="481.5,44,487.5,39,485.5,44,487.5,49,481.5,44" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="451" y="683.417">Platform</text><ellipse cx="485.5" cy="702.7188" fill="#FEFECE" filter="url(#f1j1iz55hb2pf0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="481.5,690.7188,487.5,685.7188,485.5,690.7188,487.5,695.7188,481.5,690.7188" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="692" y="84.9951">Knowledge</text><ellipse cx="734.5" cy="56" fill="#FEFECE" filter="url(#f1j1iz55hb2pf0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="722.5" x2="746.5" y1="70" y2="70"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="692" y="683.417">Knowledge</text><ellipse cx="734.5" cy="702.7188" fill="#FEFECE" filter="url(#f1j1iz55hb2pf0)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="722.5" x2="746.5" y1="716.7188" y2="716.7188"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="58.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="196.5" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="504.8594" style="stroke:#A80036;stroke-width:1.0;" width="10" x="332.5" y="148.5625"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="102.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="337.5" y="399.4922"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="122.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="337.5" y="531.0234"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="155.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="480.5" y="206.8281"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="480.5" y="623.4219"/><rect fill="#FFFFFF" filter="url(#f1j1iz55hb2pf0)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="729.5" y="457.7578"/><polygon fill="#A80036" points="184.5,115.4297,194.5,119.4297,184.5,123.4297,188.5,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="39.5" x2="190.5" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="46.5" y="114.3638">POST (body: request)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="330.5" x2="320.5" y1="148.5625" y2="144.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="330.5" x2="320.5" y1="148.5625" y2="152.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="206.5" x2="331.5" y1="148.5625" y2="148.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="213.5" y="143.4966">Route to handler</text><polygon fill="#A80036" points="50.5,173.6953,40.5,177.6953,50.5,181.6953,46.5,177.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="44.5" x2="200.5" y1="177.6953" y2="177.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="56.5" y="172.6294">200 OK</text><polygon fill="#A80036" points="468.5,202.8281,478.5,206.8281,468.5,210.8281,472.5,206.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="474.5" y1="206.8281" y2="206.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="349.5" y="201.7622">prepare</text><line style="stroke:#A80036;stroke-width:1.0;" x1="490.5" x2="532.5" y1="235.9609" y2="235.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="532.5" x2="532.5" y1="235.9609" y2="248.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="491.5" x2="532.5" y1="248.9609" y2="248.9609"/><polygon fill="#A80036" points="501.5,244.9609,491.5,248.9609,501.5,252.9609,497.5,248.9609" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="497.5" y="230.895">Log request</text><line style="stroke:#A80036;stroke-width:1.0;" x1="490.5" x2="532.5" y1="278.0938" y2="278.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="532.5" x2="532.5" y1="278.0938" y2="291.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="491.5" x2="532.5" y1="291.0938" y2="291.0938"/><polygon fill="#A80036" points="501.5,287.0938,491.5,291.0938,501.5,295.0938,497.5,291.0938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="224" x="497.5" y="273.0278">Verify authorization (access token)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="490.5" x2="532.5" y1="320.2266" y2="320.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="532.5" x2="532.5" y1="320.2266" y2="333.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="491.5" x2="532.5" y1="333.2266" y2="333.2266"/><polygon fill="#A80036" points="501.5,329.2266,491.5,333.2266,501.5,337.2266,497.5,333.2266" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="497.5" y="315.1606">Verify presentation and credentials</text><polygon fill="#A80036" points="353.5,358.3594,343.5,362.3594,353.5,366.3594,349.5,362.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="347.5" x2="484.5" y1="362.3594" y2="362.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="359.5" y="357.2935">OK</text><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="389.5" y1="386.4922" y2="386.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="389.5" x2="389.5" y1="386.4922" y2="399.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="348.5" x2="389.5" y1="399.4922" y2="399.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="348.5" x2="358.5" y1="399.4922" y2="395.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="348.5" x2="358.5" y1="399.4922" y2="403.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="354.5" y="381.4263">Process credentials</text><path d="M298,419.4922 L376,419.4922 L376,426.4922 L366,436.4922 L298,436.4922 L298,419.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:2.0;" width="489" x="298" y="419.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="313" y="432.5591">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="228" x="391" y="431.7026">[Embedded Verifiable Credentials]</text><polygon fill="#A80036" points="717.5,453.7578,727.5,457.7578,717.5,461.7578,721.5,457.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="347.5" x2="723.5" y1="457.7578" y2="457.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="300" x="354.5" y="452.6919">GET /&lt;dataset&gt;/sparql?query=&lt;sparql query&gt;</text><polygon fill="#A80036" points="358.5,482.8906,348.5,486.8906,358.5,490.8906,354.5,486.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="352.5" x2="733.5" y1="486.8906" y2="486.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="364.5" y="481.8247">result set</text><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="389.5" y1="518.0234" y2="518.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="389.5" x2="389.5" y1="518.0234" y2="531.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="348.5" x2="389.5" y1="531.0234" y2="531.0234"/><polygon fill="#A80036" points="358.5,527.0234,348.5,531.0234,358.5,535.0234,354.5,531.0234" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="354.5" y="512.9575">finalize</text><polygon fill="#A80036" points="50.5,561.1563,40.5,565.1563,50.5,569.1563,46.5,565.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="44.5" x2="336.5" y1="565.1563" y2="565.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="56.5" y="560.0903">POST (body: response)</text><polygon fill="#A80036" points="325.5,590.2891,335.5,594.2891,325.5,598.2891,329.5,594.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="39.5" x2="331.5" y1="594.2891" y2="594.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="46.5" y="589.2231">200 OK</text><polygon fill="#A80036" points="468.5,619.4219,478.5,623.4219,468.5,627.4219,472.5,623.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="347.5" x2="474.5" y1="623.4219" y2="623.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="354.5" y="618.356">Log response</text><!--MD5=[5dc52378fcd34c568c801e512cda6eb3]
@startuml
actor Afnemer		
box "Data Station" #Azure		
  boundary Protocol
  control Service 
  control Platform
  entity Knowledge	
end box		

Afnemer -> Protocol ++ : POST (body: request)		
Protocol ->> Service ++ : Route to handler		
Protocol - -> Afnemer : 200 OK		
deactivate Protocol		

Service -> Platform ++ : prepare
Platform -> Platform : Log request		
Platform -> Platform : Verify authorization (access token)		
Platform -> Platform : Verify presentation and credentials		
Platform - -> Service - - : OK	
deactivate Platform		

Service ->> Service ++ : Process credentials		
loop Embedded Verifiable Credentials		

     Service -> Knowledge ++ : GET /<dataset>/sparql?query=<sparql query>			
     Knowledge - -> Service - - : result set		
end			
deactivate Knowledge		
deactivate Service

Service -> Service ++: finalize		
Service -> Afnemer : POST (body: response)		
Afnemer - -> Service : 200 OK		
Service -> Platform ++ : Log response		
deactivate Platform		

deactivate Service
deactivate Service
@enduml

PlantUML version 1.2021.2beta9(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>