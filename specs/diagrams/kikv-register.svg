<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="468px" preserveAspectRatio="none" style="width:832px;height:468px;" version="1.1" viewBox="0 0 832 468" width="832px" zoomAndPan="magnify"><defs><filter height="300%" id="fuge7voaxt789" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="456.7266" style="stroke:#A80036;stroke-width:1.0;" width="227" x="1" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="76" x="69" y="18.0669">Consumer</text><rect fill="#F0FFFF" height="456.7266" style="stroke:#A80036;stroke-width:1.0;" width="477.5" x="271.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="99" x="460.75" y="18.0669">Data Station</text><rect fill="#FFFFFF" filter="url(#fuge7voaxt789)" height="71.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="145" y="173.9609"/><rect fill="#FFFFFF" filter="url(#fuge7voaxt789)" height="181.6641" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="656.5" y="120.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="656.5" x2="656.5" y1="120.6953" y2="302.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="666.5" x2="666.5" y1="120.6953" y2="302.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="656.5" x2="666.5" y1="120.6953" y2="120.6953"/><rect fill="#FFFFFF" filter="url(#fuge7voaxt789)" height="63.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="656.5" y="343.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="656.5" x2="656.5" y1="343.1641" y2="406.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="666.5" x2="666.5" y1="343.1641" y2="406.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="656.5" x2="666.5" y1="406.4297" y2="406.4297"/><rect fill="#FFFFFF" filter="url(#fuge7voaxt789)" height="159.6641" style="stroke:#000000;stroke-width:2.0;" width="669" x="114.5" y="135.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="83.5" x2="83.5" y1="60.4297" y2="302.3594"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="83.5" x2="83.5" y1="302.3594" y2="343.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="83.5" x2="83.5" y1="343.1641" y2="424.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="149.5" x2="149.5" y1="60.4297" y2="302.3594"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="149.5" x2="149.5" y1="302.3594" y2="343.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="149.5" x2="149.5" y1="343.1641" y2="424.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="342.5" y1="60.4297" y2="302.3594"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="342.5" x2="342.5" y1="302.3594" y2="343.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="342.5" y1="343.1641" y2="424.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="486.5" x2="486.5" y1="60.4297" y2="302.3594"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="486.5" x2="486.5" y1="302.3594" y2="343.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="486.5" x2="486.5" y1="343.1641" y2="424.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="661" x2="661" y1="60.4297" y2="302.3594"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="661" x2="661" y1="302.3594" y2="343.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="661" x2="661" y1="343.1641" y2="424.4297"/><rect fill="#FEFECE" filter="url(#fuge7voaxt789)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="57" x="53.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="60.5" y="45.1279">Client</text><rect fill="#FEFECE" filter="url(#fuge7voaxt789)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="57" x="53.5" y="423.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="60.5" y="443.4248">Client</text><rect fill="#FEFECE" filter="url(#fuge7voaxt789)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="124.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="131.5" y="45.1279">SIOP</text><rect fill="#FEFECE" filter="url(#fuge7voaxt789)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="124.5" y="423.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="131.5" y="443.4248">SIOP</text><rect fill="#FEFECE" filter="url(#fuge7voaxt789)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="130" x="275.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="282.5" y="45.1279">Resource Owner</text><rect fill="#FEFECE" filter="url(#fuge7voaxt789)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="130" x="275.5" y="423.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="282.5" y="443.4248">Resource Owner</text><rect fill="#FEFECE" filter="url(#fuge7voaxt789)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="131" x="419.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="426.5" y="45.1279">Resource Server</text><rect fill="#FEFECE" filter="url(#fuge7voaxt789)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="131" x="419.5" y="423.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="426.5" y="443.4248">Resource Server</text><rect fill="#FEFECE" filter="url(#fuge7voaxt789)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="163" x="578" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="585" y="45.1279">Authorization Server</text><rect fill="#FEFECE" filter="url(#fuge7voaxt789)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="163" x="578" y="423.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="585" y="443.4248">Authorization Server</text><rect fill="#FFFFFF" filter="url(#fuge7voaxt789)" height="71.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="145" y="173.9609"/><rect fill="#FFFFFF" filter="url(#fuge7voaxt789)" height="181.6641" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="656.5" y="120.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="656.5" x2="656.5" y1="120.6953" y2="302.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="666.5" x2="666.5" y1="120.6953" y2="302.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="656.5" x2="666.5" y1="120.6953" y2="120.6953"/><rect fill="#FFFFFF" filter="url(#fuge7voaxt789)" height="63.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="656.5" y="343.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="656.5" x2="656.5" y1="343.1641" y2="406.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="666.5" x2="666.5" y1="343.1641" y2="406.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="656.5" x2="666.5" y1="406.4297" y2="406.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="340.5" x2="330.5" y1="91.5625" y2="87.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="340.5" x2="330.5" y1="91.5625" y2="95.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="84" x2="341.5" y1="91.5625" y2="91.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="91" y="86.4966">POST /oauth2/authorize</text><polygon fill="#A80036" points="644.5,116.6953,654.5,120.6953,644.5,124.6953,648.5,120.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="650.5" y1="120.6953" y2="120.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="349.5" y="115.6294">redirect (302) openid://?response_type=token</text><path d="M114.5,135.6953 L311.5,135.6953 L311.5,142.6953 L301.5,152.6953 L114.5,152.6953 L114.5,135.6953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="159.6641" style="stroke:#000000;stroke-width:2.0;" width="669" x="114.5" y="135.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152" x="129.5" y="148.7622">Authentication flow</text><polygon fill="#A80036" points="166,169.9609,156,173.9609,166,177.9609,162,173.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="160" x2="655.5" y1="173.9609" y2="173.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="172" y="168.895">Self-Issued OpenID Provider Request</text><line style="stroke:#A80036;stroke-width:1.0;" x1="155" x2="197" y1="203.0938" y2="203.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="197" x2="197" y1="203.0938" y2="216.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="156" x2="197" y1="216.0938" y2="216.0938"/><polygon fill="#A80036" points="166,212.0938,156,216.0938,166,220.0938,162,216.0938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="162" y="198.0278">Generate ID Token</text><polygon fill="#A80036" points="644.5,241.2266,654.5,245.2266,644.5,249.2266,648.5,245.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="650.5" y1="245.2266" y2="245.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245" x="157" y="240.1606">Self-Issued OpenID Provider Response</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="666.5" x2="708.5" y1="274.3594" y2="274.3594"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="708.5" x2="708.5" y1="274.3594" y2="287.3594"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="667.5" x2="708.5" y1="287.3594" y2="287.3594"/><polygon fill="#A80036" points="677.5,283.3594,667.5,287.3594,677.5,291.3594,673.5,287.3594" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="673.5" y="269.2935">Verify ID Token</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="460" x="140.75" y="326.5698">Option to automatic accept the connection or to accept the connection manually</text><line style="stroke:#A80036;stroke-width:1.0;" x1="666.5" x2="708.5" y1="364.2969" y2="364.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="708.5" x2="708.5" y1="364.2969" y2="377.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="667.5" x2="708.5" y1="377.2969" y2="377.2969"/><polygon fill="#A80036" points="677.5,373.2969,667.5,377.2969,677.5,381.2969,673.5,377.2969" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="673.5" y="359.231">Generate Access Token</text><path d="M385,349.6641 L385,374.6641 L647,374.6641 L647,359.6641 L637,349.6641 L385,349.6641 " fill="#FBFB77" filter="url(#fuge7voaxt789)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M637,349.6641 L637,359.6641 L647,359.6641 L637,349.6641 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241" x="391" y="366.731">Authorization scope is validatedquery</text><line style="stroke:#A80036;stroke-width:1.0;" x1="84" x2="94" y1="406.4297" y2="402.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="84" x2="94" y1="406.4297" y2="410.4297"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="84" x2="660.5" y1="406.4297" y2="406.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="101" y="401.3638">Access Token</text><!--MD5=[004918f720d8a759590c3c9379d9c6b4]
@startuml
box "             Consumer                "
participant Client
participant SIOP
endbox
box "Data Station" #Azure
participant ResOwner as "Resource Owner"
participant ResServer as "Resource Server"
participant AuthServer as "Authorization Server"
endbox
Client ->> ResOwner : POST /oauth2/authorize
ResOwner -> AuthServer ++ : redirect (302) openid://?response_type=token
group Authentication flow
   AuthServer -> SIOP ++ : Self-Issued OpenID Provider Request
   SIOP -> SIOP : Generate ID Token
   SIOP - -> AuthServer - - : Self-Issued OpenID Provider Response
   AuthServer - -> AuthServer : Verify ID Token
end
... Option to automatic accept the connection or to accept the connection manually  ...
AuthServer -> AuthServer : Generate Access Token
note left: Authorization scope is validatedquery
AuthServer - ->> Client - - : Access Token
@enduml

PlantUML version 1.2021.01beta3(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>